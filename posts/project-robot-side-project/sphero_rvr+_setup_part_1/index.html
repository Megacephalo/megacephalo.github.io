<!doctype html>
<html lang="en-us">
  <head>
    <title>Sphero RVR&#43; setup part 1 // Megacephalo&#39;s Tech Blog</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.145.0">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Charly Huang" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.5b1fcc8902588589c4767187402a3c29f8b8d7a6fdef6d9f8f77045bb0d14fee.css" />
    

    
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Sphero RVR&#43; setup part 1">
  <meta name="twitter:description" content="Introduction Let’s start with making sure that our rover can work as expected. Assume that you placed your order of a Sphero RVR&#43; and now it is delivered right to your doorstep. You unboxed the rover with all the excitement that has not appeared since you graduated from college. Now what?
What you will need As you go through the rover’s getting started manual and check the items that come in the package: the programmable robot…OK it is not broken, 1 large battery bar…that goes in the robot you pressumed, 1 plastic key…that’s to lock the battery in place in the slot in the middle of the chasis, 1 USB charging cable…err that plugs directly to the battery and not the rover itself, 1 roll cage and 1 mounting plate…you don’t need it for the rest of the ride, 1 blueprint…this is the plate you think about mounting all the components on, 1 set of color cards…you don’t need these as you won’t be using the color sensor locating down to the ground at the buttom of the chasis.">

    <meta property="og:url" content="https://megacephalo.github.io/posts/project-robot-side-project/sphero_rvr&#43;_setup_part_1/">
  <meta property="og:site_name" content="Megacephalo&#39;s Tech Blog">
  <meta property="og:title" content="Sphero RVR&#43; setup part 1">
  <meta property="og:description" content="Introduction Let’s start with making sure that our rover can work as expected. Assume that you placed your order of a Sphero RVR&#43; and now it is delivered right to your doorstep. You unboxed the rover with all the excitement that has not appeared since you graduated from college. Now what?
What you will need As you go through the rover’s getting started manual and check the items that come in the package: the programmable robot…OK it is not broken, 1 large battery bar…that goes in the robot you pressumed, 1 plastic key…that’s to lock the battery in place in the slot in the middle of the chasis, 1 USB charging cable…err that plugs directly to the battery and not the rover itself, 1 roll cage and 1 mounting plate…you don’t need it for the rest of the ride, 1 blueprint…this is the plate you think about mounting all the components on, 1 set of color cards…you don’t need these as you won’t be using the color sensor locating down to the ground at the buttom of the chasis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-12-30T17:06:52+08:00">
    <meta property="article:modified_time" content="2024-12-30T17:06:52+08:00">
    <meta property="article:tag" content="Robot Side-Project">


    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KR2N7R73Y8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-KR2N7R73Y8');
    </script>
  </head>
  <body>
    <header class="app-header">
      <a href="https://megacephalo.github.io/"><img class="app-header-avatar" src="/images/avatar_headshot.png" alt="Charly Huang" /></a>
      <span class="app-header-title">Megacephalo&#39;s Tech Blog</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/posts/">All posts</a>
             - 
          
          <a class="app-header-menu-item" href="/posts/about_me">About Me</a>
             - 
          
          <a class="app-header-menu-item" href="/posts/contact_me">Contact Me</a>
      </nav>
      <p>The corner to share my learning on robotics and autonoous navigaation</p>
      <div class="app-header-social">
        
          <a href="https://github.com/Megacephalo" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-brand-github" viewBox="0 0 24 24" fill="currentColor"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
          </a>
        
          <a href="https://www.linkedin.com/in/charlyhuang/" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-brand-linkedin" viewBox="0 0 24 24" fill="currentColor"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
          </a>
        
          <a href="https://www.youtube.com/" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-brand-youtube" viewBox="0 0 24 24" fill="currentColor"><title>YouTube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Sphero RVR&#43; setup part 1</h1>
      <div class="post-meta">
        <div>
          <svg class="icon icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
          Dec 30, 2024
        </div>
        <div>
          <svg class="icon icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>clock</title><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          6 min read
        </div>
        <div>
          <svg class="icon icon-tag" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
              <a class="tag" href="https://megacephalo.github.io/tags/robot-side-project/">Robot Side-Project</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <h1 id="introduction">Introduction</h1>
<p>Let&rsquo;s start with making sure that our rover can work as expected. Assume that you placed your order of a Sphero RVR+ and now it is delivered right to your doorstep. You unboxed the rover with all the excitement that has not appeared since you graduated from college. Now what?</p>
<h1 id="what-you-will-need">What you will need</h1>
<p>As you go through the rover&rsquo;s getting started manual and check the items that come in the package: the programmable robot&hellip;OK it is not broken, 1 large battery bar&hellip;that goes in the robot you pressumed, 1 plastic key&hellip;that&rsquo;s to lock the battery in place in the slot in the middle of the chasis, 1 USB charging cable&hellip;err that plugs directly to the battery and not the rover itself, 1 roll cage and 1 mounting plate&hellip;you don&rsquo;t need it for the rest of the ride, 1 blueprint&hellip;this is the plate you think about mounting all the components on, 1 set of color cards&hellip;you don&rsquo;t need these as you won&rsquo;t be using the color sensor locating down to the ground at the buttom of the chasis.</p>
<p>You happily slice in the battery and lock it in place with the little key. Press the power button to turn on the rover and it swiftly answered with blinkinig flash lights. The game is on! You followed the instruction to installed the edu app to your tablet and successfully updated the robot firmware and able to remote control the robot with the tablet. Excellent!</p>
<p>But this is not all. For the subsequent project you will need:</p>
<ul>
<li>A computer running on Linux Ubuntu 22.04 LTS</li>
<li>RSO 2 Humble</li>
<li>At least 3 female-female jumper wires to connect between the UART pins of the dev kit and the rover.</li>
<li>(Optional) A USB-jumper debug cable to facilitate the communication bewteen your laptop and the rover. The UART end should have at least 3 UART female connectors</li>
<li>$\geq$ Python 3.12</li>
</ul>
<h1 id="hardware-setup">Hardware setup</h1>
<p>You need to understand how to connect the rover to the laptop and subsequently to the development kit. The easiest way is to test with the USB-UART deug cable but eventually you would like to move on to connecting diretly with jumper wires.</p>
<p>Since it is trickier to deal with connecting the UART pins between the dev kit and the robot, we will focus on this scenario first.</p>
<h2 id="connecting-the-jetson-orin-nano-to-sphero-rvr-data-connection">Connecting the Jetson Orin Nano to Sphero RVR+ (Data connection)</h2>
<p>The Sphero RVR+ provides an UART interface consisting of TX, RX, 5VDC and GND pins. Here is how you connect them:</p>
<p><img src="/images/project-robot-side-project/sphero_rvr+_setup_part_1/uart_connection.png" alt="UART jumper wire connection diagram"> <br>
Source: <a href="https://sdk.sphero.com/raspberry-pi-setup/python-sdk-setup">Python SDK Setup (Quick Start)</a></p>
<p><img src="/images/project-robot-side-project/sphero_rvr+_setup_part_1/OrinPin1.jpg" alt="Jetson Orin Nano pin 1"></p>
<p>Note: The UART on the Jetson Orin Nano is typically found on the J41 header. Please refer the pinout diagram at <a href="https://jetsonhacks.com/nvidia-jetson-orin-nano-gpio-header-pinout/">Jetson Orin Nano Expansion Header J12 Pinout</a>. The relevant pins are:</p>
<ul>
<li>Pin 8 (TXD)</li>
<li>Pin 10 (RXD)</li>
<li>Pin 6 (GND)</li>
</ul>
<h2 id="pin-mapping">Pin mapping</h2>
<ul>
<li><strong>RVR+ TX (Transmit)</strong> to <strong>Jetson Orin Nano RX (Received)</strong></li>
<li><strong>RVR+ RX (Receive)</strong> to <strong>Jetson Orin Nano TX (Transmit)</strong></li>
<li><strong>RVR+ GND</strong> to <strong>Jetson Orin Nano GND</strong></li>
</ul>
<h2 id="steps">Steps</h2>
<ol>
<li>
<p>Identify the UART pins to the Jetson Orin Nano&rsquo;s. Typically these pins are available on the 40 pin header.</p>
</li>
<li>
<p>Use the jmper wires to connect following the instructions in the section <strong>Pin mapping</strong>.</p>
</li>
<li>
<p>Ensure the connections are secure.</p>
</li>
<li>
<p>Power the Jetson Orin Nano. The Jetson Orin Nano requires 5VDC power supply. You will power it with a power bank through the barrel jack. Note that the USB-C on the dev kit is not for charging.</p>
</li>
</ol>
<pre tabindex="0"><code>Sphero RVR+              Jetson Orin Nano            External Power Bank
   5V  ------------------&gt; (Not used for power)      USB-A ---------------\\
   GND ------------------&gt; GND                     (via adapter)           |
   TX  ------------------&gt; RX                                              |
   RX  ------------------&gt; TX                                              |
                                            Power Input (Barrel Jack) &lt;---/
</code></pre><h1 id="set-up-the-udev-rule-on-jetson-orin-nano-server-or-robot-host">Set up the udev rule on Jetson Orin Nano (server or robot host)</h1>
<p>Git clone the <a href="https://github.com/linorobot/sphero_rvr/blob/main/install_udev_rule.sh">sphero_rvr/install_udev_rule.sh</a> to wherever in your Jetson Orin Nano home directory. You need the bash file under this cloned repository to set up your UART port access right.</p>
<h2 id="remove-console-logging">Remove console logging</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo nano /boot/firmware/cmdline.txt
</span></span></code></pre></div><p>Once open the file, remove the line <code>console=serial0, 15200</code>.</p>
<h2 id="install-udev-rules">Install udev rules</h2>
<p>Execute the bash file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod a+x install_udev_rule.sh      <span style="color:#75715e"># if you haven&#39;t</span>
</span></span><span style="display:flex;"><span>bash install_udev_rule.sh
</span></span></code></pre></div><p>Reboot the machine to take effect.</p>
<p>One last thing. The “install_udev_rule.sh” copies the udev rule for Sphero RVR+ to /etc/udev/rules.d. You need to modify or add a udev rule as the UART port /dev/ttyS0 is for Raspberry Pi and not Jetson Orin Nano. Instead, for the latter the UART port is on /dev/ttyTHS0 or /dev/ttyTHS1.</p>
<p>So the newly added line under the sphero.rules file is as follows,</p>
<pre tabindex="0"><code>ACTION==&#34;add&#34;, KERNEL==&#34;ttyTHS1&#34;, MODE==&#34;0666&#34;
</code></pre><p>The “0666” means to grant everyone (even the ones outside of the dialout group) the read and write permission to the port.</p>
<p>This command is equivalent to the command that only changes temporary access right of the port:</p>
<pre tabindex="0"><code>sudo chmod a+rw /dev/ttyTHS1
</code></pre><p>Once this udev rule is saved, reboot to take effect.</p>
<p>To test whether the change already kicks in, you can run a simple serial communication Python script:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> serial <span style="color:#f92672">import</span> Serial
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>port_id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/dev/ttyTHS1&#39;</span>
</span></span><span style="display:flex;"><span>baud_rate <span style="color:#f92672">=</span> <span style="color:#ae81ff">115200</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ser <span style="color:#f92672">=</span> Serial(port_id, baud_Rate)
</span></span><span style="display:flex;"><span>print(ser)
</span></span></code></pre></div><p>If everything works accordingly, you can see the information of the serial instance printed out on the screen.</p>
<h2 id="if-you-wnt-to-connect-your-rvr-with-your-laptop-or-dev-kit-via-a-usb-uart-cable">If you wnt to connect your RVR+ with your laptop or dev kit via a USB-UART cable</h2>
<p>THe port to connect is by default <code>/dev/ttyUSB0</code> which is distinct from the Raspberry Pi&rsquo;s <code>/dev/ttyS0</code> or the Jetson Orin Nano&rsquo;s UART port at <code>/dev/ttyTHS0</code>.</p>
<p>Make sure that your <code>/dev/ttyUSB0</code> port is granted read-write access to the dialout groupd for your user. On the terminal, first make sure the port exists:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls | grep /dev/ttyUSB*
</span></span></code></pre></div><p>it should return at least the <code>/dev/ttyUSB0</code> port. Probably a <em>permission denied</em> message will appear to the right of the port on your terminal. To grant access, use the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo usermod -a -G dialout &amp;USER
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and also</span>
</span></span><span style="display:flex;"><span>sudo chmod a+rw /dev/ttyUSB0
</span></span></code></pre></div><p>Once this command is inserted, log out and log back in to take effect.</p>
<p>Next time you can check whether the change in the access right with the command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ll /dev/ttyUSB0 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># then you should receive</span>
</span></span><span style="display:flex;"><span>crw-rw-rw- <span style="color:#ae81ff">1</span> root dialout 188, <span style="color:#ae81ff">0</span> Sep <span style="color:#ae81ff">29</span> 14:04 /dev/ttyUSB0
</span></span></code></pre></div><p>from the first few characters (<code>crw-rw-rw-</code>), it is safe to say that the uer is already granted write and read access to the port. Now you are free to communicate with the robot via this port. Please following the same procedure to grant access to other port if it is not the displayed one above.</p>
<h2 id="final-steps">Final steps</h2>
<ol>
<li>Double-check all connections</li>
<li>Power on the external power bank to supply power to the Jetson Orin Nano</li>
<li>Ensure the Sphero RVR+ is powered on and comunicating through the UART connection</li>
</ol>
<p>If the dev kit is properly powered up and boot into the desktop, you are good to go. We will have another article to discuss how to set up the Jetson Orin Nano with ROS 2 Humble.</p>
<h1 id="we-are-not-done-yet">We are not done yet&hellip;</h1>
<p>For the network and software configuration, please refer to the article <a href="/posts/project-robot-side-project/sphero_rvr+_setup_part_2">Sphero RVR+ setup part 2</a>. See you there.</p>

    </div>
    <div class="post-footer">
      

      <script src="https://utteranc.es/client.js"
        repo="megacephalo/megacephalo.github.io"
        issue-term="pathname"
        theme="github-dark"
        crossorigin="anonymous"
        async>
      </script>
    </div>
  </article>

    </main>
  </body>
</html>
